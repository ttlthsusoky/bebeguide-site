(function initVaccinationManager(){const vaccineListContainer=document.getElementById('vaccineList');const filterBtns=document.querySelectorAll('.vaccine-filter-btn');const clearBtn=document.getElementById('clearVaccineData');if(!vaccineListContainer)return;let currentFilter='all';const VACCINES=[{id: 'bcg',name: 'BCG(ê²°í•µ)',schedule: 'ìƒí›„ 4ì£¼ ì´ë‚´',type: 'required',dose: 1,description: 'í”¼ë‚´ìš© ë˜ëŠ” ê²½í”¼ìš©'},{id: 'hepb1',name: 'Bí˜•ê°„ì—¼ 1ì°¨',schedule: 'ìƒí›„ 0-1ê°œì›”',type: 'required',dose: 1,description: 'ì¶œìƒ ì§í›„ ì ‘ì¢… ê¶Œì¥'},{id: 'hepb2',name: 'Bí˜•ê°„ì—¼ 2ì°¨',schedule: 'ìƒí›„ 1ê°œì›”',type: 'required',dose: 2,description: '1ì°¨ ì ‘ì¢… í›„ 1ê°œì›”'},{id: 'hepb3',name: 'Bí˜•ê°„ì—¼ 3ì°¨',schedule: 'ìƒí›„ 6ê°œì›”',type: 'required',dose: 3,description: '1ì°¨ ì ‘ì¢… í›„ 6ê°œì›”'},{id: 'dtap1',name: 'DTaP 1ì°¨',schedule: 'ìƒí›„ 2ê°œì›”',type: 'required',dose: 1,description: 'ë””í”„í…Œë¦¬ì•„Â·íŒŒìƒí’Â·ë°±ì¼í•´'},{id: 'dtap2',name: 'DTaP 2ì°¨',schedule: 'ìƒí›„ 4ê°œì›”',type: 'required',dose: 2,description: '1ì°¨ í›„ 2ê°œì›” ê°„ê²©'},{id: 'dtap3',name: 'DTaP 3ì°¨',schedule: 'ìƒí›„ 6ê°œì›”',type: 'required',dose: 3,description: '2ì°¨ í›„ 2ê°œì›” ê°„ê²©'},{id: 'dtap4',name: 'DTaP 4ì°¨',schedule: '15-18ê°œì›”',type: 'required',dose: 4,description: '3ì°¨ í›„ 6-12ê°œì›”'},{id: 'dtap5',name: 'DTaP 5ì°¨',schedule: '4-6ì„¸',type: 'required',dose: 5,description: '4ì°¨ í›„ ë§Œ 4-6ì„¸'},{id: 'ipv1',name: 'í´ë¦¬ì˜¤ 1ì°¨',schedule: 'ìƒí›„ 2ê°œì›”',type: 'required',dose: 1,description: 'ì†Œì•„ë§ˆë¹„ ì˜ˆë°©'},{id: 'ipv2',name: 'í´ë¦¬ì˜¤ 2ì°¨',schedule: 'ìƒí›„ 4ê°œì›”',type: 'required',dose: 2,description: '1ì°¨ í›„ 2ê°œì›”'},{id: 'ipv3',name: 'í´ë¦¬ì˜¤ 3ì°¨',schedule: 'ìƒí›„ 6ê°œì›”',type: 'required',dose: 3,description: '2ì°¨ í›„ 2ê°œì›”'},{id: 'ipv4',name: 'í´ë¦¬ì˜¤ 4ì°¨',schedule: '4-6ì„¸',type: 'required',dose: 4,description: '3ì°¨ í›„ ë§Œ 4-6ì„¸'},{id: 'hib1',name: 'Hib 1ì°¨',schedule: 'ìƒí›„ 2ê°œì›”',type: 'required',dose: 1,description: 'bí˜• í—¤ëª¨í•„ë£¨ìŠ¤ ì¸í”Œë£¨ì—”ì'},{id: 'hib2',name: 'Hib 2ì°¨',schedule: 'ìƒí›„ 4ê°œì›”',type: 'required',dose: 2,description: '1ì°¨ í›„ 2ê°œì›”'},{id: 'hib3',name: 'Hib 3ì°¨',schedule: 'ìƒí›„ 6ê°œì›”',type: 'required',dose: 3,description: '2ì°¨ í›„ 2ê°œì›”'},{id: 'hib4',name: 'Hib 4ì°¨',schedule: '12-15ê°œì›”',type: 'required',dose: 4,description: '3ì°¨ í›„ 6ê°œì›” ì´ìƒ'},{id: 'pcv1',name: 'íë ´êµ¬ê·  1ì°¨',schedule: 'ìƒí›„ 2ê°œì›”',type: 'required',dose: 1,description: 'ë‹¨ë°±ê²°í•© ë°±ì‹ '},{id: 'pcv2',name: 'íë ´êµ¬ê·  2ì°¨',schedule: 'ìƒí›„ 4ê°œì›”',type: 'required',dose: 2,description: '1ì°¨ í›„ 2ê°œì›”'},{id: 'pcv3',name: 'íë ´êµ¬ê·  3ì°¨',schedule: 'ìƒí›„ 6ê°œì›”',type: 'required',dose: 3,description: '2ì°¨ í›„ 2ê°œì›”'},{id: 'pcv4',name: 'íë ´êµ¬ê·  4ì°¨',schedule: '12-15ê°œì›”',type: 'required',dose: 4,description: '3ì°¨ í›„ 6ê°œì›” ì´ìƒ'},{id: 'mmr1',name: 'MMR 1ì°¨',schedule: '12-15ê°œì›”',type: 'required',dose: 1,description: 'í™ì—­Â·ìœ í–‰ì„±ì´í•˜ì„ ì—¼Â·í’ì§„'},{id: 'mmr2',name: 'MMR 2ì°¨',schedule: '4-6ì„¸',type: 'required',dose: 2,description: '1ì°¨ í›„ ë§Œ 4-6ì„¸'},{id: 'varicella',name: 'ìˆ˜ë‘',schedule: '12-15ê°œì›”',type: 'required',dose: 1,description: '1íšŒ ì ‘ì¢…'},{id: 'hepa1',name: 'Aí˜•ê°„ì—¼ 1ì°¨',schedule: '12-23ê°œì›”',type: 'required',dose: 1,description: 'ìƒí›„ 12ê°œì›” ì´í›„'},{id: 'hepa2',name: 'Aí˜•ê°„ì—¼ 2ì°¨',schedule: '18-35ê°œì›”',type: 'required',dose: 2,description: '1ì°¨ í›„ 6-12ê°œì›”'},{id: 'je1',name: 'ì¼ë³¸ë‡Œì—¼ 1ì°¨',schedule: '12-23ê°œì›”',type: 'required',dose: 1,description: 'ì‚¬ë°±ì‹  ê¸°ì¤€'},{id: 'je2',name: 'ì¼ë³¸ë‡Œì—¼ 2ì°¨',schedule: '12-23ê°œì›”',type: 'required',dose: 2,description: '1ì°¨ í›„ 1-2ì£¼'},{id: 'je3',name: 'ì¼ë³¸ë‡Œì—¼ 3ì°¨',schedule: '24-35ê°œì›”',type: 'required',dose: 3,description: '2ì°¨ í›„ 12ê°œì›”'},{id: 'je4',name: 'ì¼ë³¸ë‡Œì—¼ 4ì°¨',schedule: '6ì„¸',type: 'required',dose: 4,description: '3ì°¨ í›„ ë§Œ 6ì„¸'},{id: 'je5',name: 'ì¼ë³¸ë‡Œì—¼ 5ì°¨',schedule: '12ì„¸',type: 'required',dose: 5,description: '4ì°¨ í›„ ë§Œ 12ì„¸'},{id: 'flu',name: 'ì¸í”Œë£¨ì—”ì(ë…ê°)',schedule: 'ìƒí›„ 6ê°œì›”~',type: 'optional',dose: 0,description: 'ë§¤ë…„ ê°€ì„ ì ‘ì¢…'},{id: 'rotavirus',name: 'ë¡œíƒ€ë°”ì´ëŸ¬ìŠ¤',schedule: 'ìƒí›„ 2-6ê°œì›”',type: 'optional',dose: 0,description: 'ê²½êµ¬ìš© ìƒë°±ì‹ '},];function getVaccineStatus(){const data=localStorage.getItem('baby_vaccination');return data ? JSON.parse(data):{};}function saveVaccineStatus(status){localStorage.setItem('baby_vaccination',JSON.stringify(status));}function toggleVaccineStatus(vaccineId){const status=getVaccineStatus();status[vaccineId]=!status[vaccineId];saveVaccineStatus(status);}function clearAllVaccineData(){if(confirm('ëª¨ë“  ì˜ˆë°©ì ‘ì¢… ê¸°ë¡ì„ ì´ˆê¸°í™”í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')){localStorage.removeItem('baby_vaccination');renderVaccineList();updateProgress();showNotification('ì˜ˆë°©ì ‘ì¢… ê¸°ë¡ì´ ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤','success');}}function updateProgress(){const status=getVaccineStatus();const total=VACCINES.length;const completed=Object.values(status).filter(Boolean).length;const remaining=total - completed;const percentage=Math.round((completed / total)* 100);document.getElementById('vaccineTotal').textContent=total;document.getElementById('vaccineCompleted').textContent=completed;document.getElementById('vaccineRemaining').textContent=remaining;document.getElementById('vaccineProgress').textContent=percentage + '%';document.getElementById('vaccineProgressBar').style.width=percentage + '%';}function renderVaccineList(){const status=getVaccineStatus();let filteredVaccines=VACCINES;if(currentFilter==='required'){filteredVaccines=VACCINES.filter(v=> v.type==='required');}else if(currentFilter==='optional'){filteredVaccines=VACCINES.filter(v=> v.type==='optional');}else if(currentFilter==='completed'){filteredVaccines=VACCINES.filter(v=> status[v.id]);}vaccineListContainer.innerHTML=filteredVaccines.map(vaccine=>{const isCompleted=status[vaccine.id] || false;const typeLabel=vaccine.type==='required' ? 'í•„ìˆ˜' : 'ì„ íƒ';const typeClass=vaccine.type==='required' ? 'required' : 'optional';return `
<div class="vaccine-card ${isCompleted ? 'completed' : ''}" data-id="${vaccine.id}">
<div class="vaccine-header">
<div class="vaccine-checkbox-wrapper">
<input type="checkbox"
id="vaccine-${vaccine.id}"
class="vaccine-checkbox"
${isCompleted ? 'checked' : ''}data-id="${vaccine.id}">
<label for="vaccine-${vaccine.id}" class="vaccine-checkbox-label"></label>
</div>
<div class="vaccine-info">
<h3 class="vaccine-name">${vaccine.name}</h3>
<span class="vaccine-type ${typeClass}">${typeLabel}</span>
</div>
</div>
<div class="vaccine-details">
<div class="vaccine-detail-item">
<i class="fas fa-calendar"></i>
<span>${vaccine.schedule}</span>
</div>
<div class="vaccine-detail-item">
<i class="fas fa-info-circle"></i>
<span>${vaccine.description}</span>
</div>
</div>
</div>
`;}).join('');document.querySelectorAll('.vaccine-checkbox').forEach(checkbox=>{checkbox.addEventListener('change',(e)=>{const vaccineId=e.target.getAttribute('data-id');toggleVaccineStatus(vaccineId);renderVaccineList();updateProgress();const vaccine=VACCINES.find(v=> v.id===vaccineId);const message=e.target.checked
? `${vaccine.name}ì ‘ì¢… ì™„ë£Œë¡œ í‘œì‹œë˜ì—ˆìŠµë‹ˆë‹¤ âœ…`
: `${vaccine.name}ë¯¸ì ‘ì¢…ìœ¼ë¡œ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤`;showNotification(message,'success');});});updateProgress();}filterBtns.forEach(btn=>{btn.addEventListener('click',()=>{filterBtns.forEach(b=> b.classList.remove('active'));btn.classList.add('active');currentFilter=btn.getAttribute('data-filter');renderVaccineList();});});clearBtn?.addEventListener('click',clearAllVaccineData);renderVaccineList();})();(function initBabyDiary(){const diaryForm=document.getElementById('diaryEntryForm');const diaryList=document.getElementById('diaryEntriesList');const clearBtn=document.getElementById('clearDiaryData');const dateInput=document.getElementById('diary_date');if(!diaryForm || !diaryList)return;if(dateInput){dateInput.valueAsDate=new Date();}function getDiaryEntries(){const data=localStorage.getItem('baby_diary');return data ? JSON.parse(data): [];}function saveDiaryEntries(entries){localStorage.setItem('baby_diary',JSON.stringify(entries));}function addDiaryEntry(entry){const entries=getDiaryEntries();entry.id=Date.now();entry.createdAt=new Date().toISOString();entries.unshift(entry);saveDiaryEntries(entries);return entry;}function deleteDiaryEntry(id){const entries=getDiaryEntries();const filtered=entries.filter(entry=> entry.id !==id);saveDiaryEntries(filtered);}function clearAllDiaryEntries(){if(confirm('ëª¨ë“  ë‹¤ì´ì–´ë¦¬ ê¸°ë¡ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?\nì´ ì‘ì—…ì€ ë˜ëŒë¦´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.')){localStorage.removeItem('baby_diary');renderDiaryList();showNotification('ëª¨ë“  ë‹¤ì´ì–´ë¦¬ ê¸°ë¡ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤','success');}}function formatDate(dateString){const date=new Date(dateString);const year=date.getFullYear();const month=String(date.getMonth()+ 1).padStart(2,'0');const day=String(date.getDate()).padStart(2,'0');const weekdays=['ì¼','ì›”','í™”','ìˆ˜','ëª©','ê¸ˆ','í† '];const weekday=weekdays[date.getDay()];return year + 'ë…„ ' + month + 'ì›” ' + day + 'ì¼(' + weekday + ')';}function getRelativeTime(dateString){const now=new Date();const past=new Date(dateString);const diffMs=now - past;const diffDays=Math.floor(diffMs /(1000 * 60 * 60 * 24));if(diffDays===0)return 'ì˜¤ëŠ˜';if(diffDays===1)return 'ì–´ì œ';if(diffDays < 7)return diffDays + 'ì¼ ì „';if(diffDays < 30)return Math.floor(diffDays / 7)+ 'ì£¼ ì „';if(diffDays < 365)return Math.floor(diffDays / 30)+ 'ê°œì›” ì „';return Math.floor(diffDays / 365)+ 'ë…„ ì „';}function renderDiaryList(){const entries=getDiaryEntries();if(entries.length===0){diaryList.innerHTML='<div class="no-diary-entries">' +
'<div class="no-data-icon">ğŸ“</div>' +
'<p>ì•„ì§ ê¸°ë¡ëœ ë‹¤ì´ì–´ë¦¬ê°€ ì—†ìŠµë‹ˆë‹¤</p>' +
'<p style="font-size: 0.9rem;color: #9ca3af;">ì•„ê¸°ì˜ íŠ¹ë³„í•œ ìˆœê°„ì„ ê¸°ë¡í•´ë³´ì„¸ìš”!</p>' +
'</div>';return;}diaryList.innerHTML=entries.map(entry=>{const monthText=entry.month ? entry.month + 'ê°œì›”' : '';const weightText=entry.weight ? entry.weight + 'kg' : '';const heightText=entry.height ? entry.height + 'cm' : '';const statsText=[monthText,weightText,heightText].filter(Boolean).join(' Â· ');let html='<div class="diary-entry-card">';html +='<div class="diary-entry-header">';html +='<div class="diary-entry-date">';html +='<div class="diary-date-primary">' + formatDate(entry.date)+ '</div>';html +='<div class="diary-date-relative">' + getRelativeTime(entry.date)+ '</div>';html +='</div>';html +='<button class="delete-diary-btn" data-id="' + entry.id + '" title="ì‚­ì œ">';html +='<i class="fas fa-trash-alt"></i>';html +='</button>';html +='</div>';html +='<div class="diary-entry-milestone">';html +='<i class="fas fa-star" style="color: #fbbf24;"></i>';html +='<strong>' + entry.milestone + '</strong>';html +='</div>';if(statsText){html +='<div class="diary-entry-stats">';html +='<i class="fas fa-chart-line" style="color: var(--primary-color);"></i>';html +=statsText;html +='</div>';}if(entry.note){html +='<div class="diary-entry-note">' + entry.note + '</div>';}html +='<div class="diary-entry-footer">';html +='<small><i class="fas fa-clock"></i> ì‘ì„±: ' + getRelativeTime(entry.createdAt)+ '</small>';html +='</div>';html +='</div>';return html;}).join('');document.querySelectorAll('.delete-diary-btn').forEach(btn=>{btn.addEventListener('click',(e)=>{const id=parseInt(e.currentTarget.getAttribute('data-id'));if(confirm('ì´ ë‹¤ì´ì–´ë¦¬ ê¸°ë¡ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')){deleteDiaryEntry(id);renderDiaryList();showNotification('ë‹¤ì´ì–´ë¦¬ ê¸°ë¡ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤','success');}});});}diaryForm.addEventListener('submit',(e)=>{e.preventDefault();const entry={date: document.getElementById('diary_date').value,month: document.getElementById('diary_month').value,weight: document.getElementById('diary_weight').value,height: document.getElementById('diary_height').value,milestone: document.getElementById('diary_milestone').value.trim(),note: document.getElementById('diary_note').value.trim()};if(!entry.date || !entry.milestone){showNotification('ë‚ ì§œì™€ íŠ¹ë³„í•œ ìˆœê°„ì€ í•„ìˆ˜ ì…ë ¥ í•­ëª©ì…ë‹ˆë‹¤','error');return;}addDiaryEntry(entry);renderDiaryList();diaryForm.reset();if(dateInput){dateInput.valueAsDate=new Date();}showNotification('ë‹¤ì´ì–´ë¦¬ ê¸°ë¡ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤! ğŸ“–','success');diaryList.scrollIntoView({behavior: 'smooth',block: 'nearest'});});clearBtn?.addEventListener('click',clearAllDiaryEntries);const exportJSONBtn=document.getElementById('exportDiaryJSON');const exportCSVBtn=document.getElementById('exportDiaryCSV');function downloadFile(content,filename,type){const blob=new Blob([content],{type: type});const url=URL.createObjectURL(blob);const a=document.createElement('a');a.href=url;a.download=filename;document.body.appendChild(a);a.click();document.body.removeChild(a);URL.revokeObjectURL(url);}function exportToJSON(){const entries=getDiaryEntries();if(entries.length===0){showNotification('ë‚´ë³´ë‚¼ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤','error');return;}const dataStr=JSON.stringify(entries,null,2);const today=new Date().toISOString().split('T')[0];downloadFile(dataStr,`ë² ë² ê°€ì´ë“œ_ë‹¤ì´ì–´ë¦¬_${today}.json`,'application/json');showNotification('ë‹¤ì´ì–´ë¦¬ë¥¼ JSONìœ¼ë¡œ ë‚´ë³´ëƒˆìŠµë‹ˆë‹¤!','success');}function exportToCSV(){const entries=getDiaryEntries();if(entries.length===0){showNotification('ë‚´ë³´ë‚¼ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤','error');return;}let csv='ë‚ ì§œ,ì›”ë ¹,ëª¸ë¬´ê²Œ(kg),í‚¤(cm),íŠ¹ë³„í•œ ìˆœê°„,ë©”ëª¨,ì‘ì„±ì¼ì‹œ\n';entries.forEach(entry=>{const row=[
entry.date || '',entry.month ? entry.month + 'ê°œì›”' : '',entry.weight || '',entry.height || '','"' +(entry.milestone || '').replace(/"/g,'""')+ '"','"' +(entry.note || '').replace(/"/g,'""')+ '"',entry.createdAt ? new Date(entry.createdAt).toLocaleString('ko-KR'): ''
];csv +=row.join(',')+ '\n';});const BOM='\uFEFF';const today=new Date().toISOString().split('T')[0];downloadFile(BOM + csv,`ë² ë² ê°€ì´ë“œ_ë‹¤ì´ì–´ë¦¬_${today}.csv`,'text/csv;charset=utf-8');showNotification('ë‹¤ì´ì–´ë¦¬ë¥¼ CSVë¡œ ë‚´ë³´ëƒˆìŠµë‹ˆë‹¤!','success');}exportJSONBtn?.addEventListener('click',exportToJSON);exportCSVBtn?.addEventListener('click',exportToCSV);const importJSONInput=document.getElementById('importDiaryJSON');function importFromJSON(file){const reader=new FileReader();reader.onload=(e)=>{try{const importedData=JSON.parse(e.target.result);if(!Array.isArray(importedData)){showNotification('ì˜¬ë°”ë¥¸ ë‹¤ì´ì–´ë¦¬ ë°ì´í„° í˜•ì‹ì´ ì•„ë‹™ë‹ˆë‹¤','error');return;}const existingData=getDiaryEntries();if(existingData.length > 0){if(!confirm('ê¸°ì¡´ ë°ì´í„°ê°€ ìˆìŠµë‹ˆë‹¤. ë³‘í•©í•˜ì‹œê² ìŠµë‹ˆê¹Œ?\n(ì·¨ì†Œí•˜ë©´ ê¸°ì¡´ ë°ì´í„°ë¥¼ ë®ì–´ì”ë‹ˆë‹¤)')){saveDiaryEntries(importedData);renderDiaryList();showNotification(`${importedData.length}ê°œì˜ ë‹¤ì´ì–´ë¦¬ê°€ ë³µì›ë˜ì—ˆìŠµë‹ˆë‹¤`,'success');return;}}const mergedData=[...existingData];let newCount=0;importedData.forEach(entry=>{const exists=mergedData.find(e=> e.id===entry.id);if(!exists){mergedData.push(entry);newCount++;}});mergedData.sort((a,b)=> new Date(b.date)- new Date(a.date));saveDiaryEntries(mergedData);renderDiaryList();showNotification(`${newCount}ê°œì˜ ìƒˆë¡œìš´ ë‹¤ì´ì–´ë¦¬ê°€ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤(ì´ ${mergedData.length}ê°œ)`,'success');}catch(error){showNotification('íŒŒì¼ì„ ì½ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤','error');console.error('Import error:',error);}};reader.readAsText(file);}importJSONInput?.addEventListener('change',(e)=>{const file=e.target.files[0];if(file){importFromJSON(file);e.target.value='';}});renderDiaryList();})();console.log("ğŸ¼ ë² ë² ê°€ì´ë“œ diary.js ë¡œë“œ ì™„ë£Œ");